{% include "kess/header.html" %}
{% load static %}


<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"
      xmlns="http://www.w3.org/1999/html">
<link rel="stylesheet" type="text/css" href="{% static 'kess/style.css' %}">

<div class="container kessDetails">
    <h3 class="title_detail">
        <a>
            Kess ?
        </a>
        {% if user.is_authenticated %}
            <a>
                {% if is_fav %}
                    <form class="inline favStar" action="#" method="get">
                        <input id="isFavStar" type="submit" class="btn" value="‚ú¶" name="removeFav" title="Retirer des favoris">
                    </form>
                {% else %}
                    <form class="inline favStar" action="#" method="get">
                        <input id="isntFavStar" type="submit" class="btn" value="‚úß" name="addFav" title="Ajouter aux favoris">
                    </form>
                {% endif %}
            </a>
        {% endif %}
    </h3>
    <h1 class="kess_img">{{ kess.emoji }}</h1>

    {% if user.is_authenticated %}
        <h3>{{kess_hint}}</h3>
        {% if is_answer_valide %}
        <div class="detail_answer">
            Cat√©gorie : {{kess.category}}</br>
            Indice de difficult√© de {{kess_diff}}
            <h3 class="kessFoundMessage">Vous avez r√©solu ce Kess ! La r√©ponse est : </h3>
            <h3>"{{kess.reponse}}"</h3>
        </div>
        {% else %}
        <form action="" method="POST" class="">
            {% csrf_token %}
            <p>
                Cat√©gorie :
                {%if display_category_hint%}
                    {{kess.category}}
                {%else%}
                    Vous aurez cet indice 5 jours apr√©s la publication de ce Kess
                {%endif%}
            </p>
            <p>
                Indice de difficult√© de
                    {{kess_diff}}
            </p>
            {% if kess.is_ready_to_publish %}
                <div class="form-group">
                    <label class="col-form-label" for="answer">Entrez votre proposition: </label>
                    <input class="form-control col-lg-5" type="answer" name="answer" id="answer" required>
                </div>
                <div class="form-group">
                    <input class="btn btn-lg btn-dark" type="submit" value="Essayer la proposition">
                </div>
            {% endif %}
        </form>
        {% endif %}
    {% else %}
        <span>‚ö†Ô∏è Vous devez √™tre connect√© pour proposer une r√©ponse</span>
        <br>
        <a class="btn btn-dark removeHyperlinkStyling" href="../login_user/">Se connecter ?</a>
    {% endif %}
    {% if user.is_authenticated %}
    <div class="kessPopularity font20">
        <form class="inline noMargin" action="#" method="get">
            <input id="upvote" type="submit" class="btn font20 noPadding voteArrow" value={{ voteIcon1 }} name="upVote" title="Upvoter">
        </form>
        <a>{{ upPercent }}% / {{ downPercent }}%</a>
        <form class="inline noMargin" action="#" method="get">
            <input id="downvote" type="submit" class="btn font20 noPadding voteArrow" value={{ voteIcon2 }} name="downVote" title="Downvoter">
        </form>

        <div class="kessPopularityBars">
            <div class="inline popularityBar" style="background-color: green; width: {{ upWidth }}px"></div>
            <div class="inline popularityBar" style="background-color: red; width: {{ downWidth }}px"></div>
        </div>
    </div>
    {% endif %}

    <p class="detail-publication-date">
        Kess cr√©√© par {{ kess.created_by }} et publi√© le : {{ pubDate }}
    </p>
</div>

<div class="pointsReminder detailsPointsReminders">
    <a>
        üîî Rappel des points pour chaque Kess trouv√© :
    </a></br>
    <a>
        ‚úÖ 5 points de base
    </a></br>
    <a>
        üòé 5 points si trouv√© sans indice (moins de 3 jours apr√®s la publication)
    </a></br>
    <a>
        üíÉ 5 points si trouv√© sans indication de cat√©gorie (moins de 5 jours apr√®s la publication)
    </a></br>
    <a>
        ü•à 10 points si trouv√© en second
    </a></br>
    <a>
        ü•á 20 points si trouv√© en premier
    </a></br>
</div>